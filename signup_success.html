<!DOCTYPE html>
<html>
<head>
    <title>Welcome to NetFlixX!</title>
    <!-- Load ThriveStack SDK -->
    <script src="https://ts-script.app.thrivestack.ai/latest/thrivestack.js" 
        api-key="m9S/wwTPiv7egZcG7DeBdvlsW37YfHRMpstb3xh1S0g=" 
        source="marketing,product">
    </script>
</head>
<body>
    <h1>Welcome! Your account is ready.</h1>
    <p>Redirecting to login...</p>

    <!-- ThriveStack Tracking -->
    <script>
        const userEmail = sessionStorage.getItem('signupEmail'); // From signup form
        const userName = userEmail?.split('@')[0] || 'User';

        window.thriveStack.track([{
            "event_name": "signed_up",
            "properties": {
                "user_email": userEmail,
                "user_name": userName,
                "utm_campaign": new URLSearchParams(window.location.search).get('utm_campaign') || 'direct',
                "utm_medium": new URLSearchParams(window.location.search).get('utm_medium') || 'none',
                "utm_source": new URLSearchParams(window.location.search).get('utm_source') || 'direct',
                "utm_term": new URLSearchParams(window.location.search).get('utm_term') || 'none'
            },
            "user_id": crypto.randomUUID(), // Generate UUID
            "timestamp": new Date().toISOString()
        }]);

        // Redirect to login after tracking
        setTimeout(() => window.location.href = 'login.html', 2000);
    </script>
</body>
</html>